# Идеи по улучшению и Roadmap

Ниже приведен список возможных улучшений для развития проекта Docs Q&A RAG.

## 1. Продвинутая обработка документов (Ingestion)
*   **OCR (Распознавание текста)**:
    *   *Проблема*: Сейчас `pypdf` не читает сканированные документы (картинки внутри PDF).
    *   *Решение*: Интегрировать `Tesseract` или использовать сервисы типа Unstructured.io / Azure DI.
*   **Улучшенный чанкинг**:
    *   *Идея*: Использовать "семантический чанкинг" (semantic chunking) или "parent document retriever" (поиск по мелким чанкам, а подача в LLM более крупных блоков).
*   **Поддержка форматов**: Добавить DOCX, PPTX, MD, HTML.

## 2. Качество поиска (Retrieval)
*   **Гибридный поиск (Hybrid Search)**: [Реализовано]
    *   *Идея*: Объединить векторный поиск (semantic) с поиском по ключевым словам (keyword/BM25). Это улучшает поиск точных терминов, имен и артикулов.
    *   *Реализация*: Supabase поддерживает `pg_jsonschema` и FTS, или можно использовать Rerank модели.
*   **Reranking (Переранжирование)**: [Реализовано в Project 11]
    *   *Идея*: После получения Топ-20 кандидатов из базы, использовать Cross-Encoder (например, Cohere Rerank) для точного переупорядочивания.
    *   *Реализация*: LLM-based Reranking с помощью gpt-4o-mini.

## 3. Чат и LLM
*   **История чатов**:
    *   *Текущее состояние*: История живет только в сессии браузера.
    *   *Улучшение*: Сохранять историю диалогов в базу данных (`chat_sessions`, `messages`), чтобы пользователь мог возвращаться к ним.
*   **Streaming (Потоковая передача)**:
    *   *Улучшение*: Выводить ответ LLM по словам (как в ChatGPT), чтобы не ждать генерации целиком.
*   **Цитирование**: Добавить подсветку конкретных предложений в тексте источника.

## 4. Архитектура и Безопасность
*   **Аутентификация**:
    *   Внедрить Supabase Auth (Email, Google, GitHub), чтобы у каждого пользователя были свои личные документы.
*   **Очереди задач**:
    *   Для тяжелых файлов заменить `BackgroundTasks` на полноценную очередь (Celery/Redis или Arq), чтобы не нагружать веб-сервер.

## 5. UI/UX
*   **Предпросмотр PDF**: Показывает PDF файл прямо в интерфейсе с выделенным найденным фрагментом.
*   **Настройки**: Позволить пользователю выбирать модель (GPT-3.5/4) и температуру генерации.
